/**
 * Created by robot on 10/24/14.
 */
// --- file[jquery.boxy.js] ---

/**
 * Boxy 0.1.4 - Facebook-style dialog, with frills
 *
 * (c) 2008 Jason Frame
 * Licensed under the MIT License (LICENSE)
 */

/*
 * jQuery plugin
 *
 * Options:
 *   message: confirmation message for form submit hook (default: "Please confirm:")
 *
 * Any other options - e.g. 'clone' - will be passed onto the boxy constructor (or
 * Boxy.load for AJAX operations)
 */
function Boxy(e,t){this.boxy=jQuery(Boxy.WRAPPER);jQuery.data(this.boxy[0],"boxy",this);this.visible=false;this.options=jQuery.extend({},Boxy.DEFAULTS,t||{});if(this.options.modal){this.options=jQuery.extend(this.options,{center:true,draggable:true})}if(this.options.actuator){jQuery.data(this.options.actuator,"active.boxy",this)}this.setContent(e||"<div></div>");this._setupTitleBar();this.boxy.css("display","none").appendTo(document.body);this.toTop();if(this.options.fixed){if(jQuery.browser.msie&&jQuery.browser.version<7){this.options.fixed=false}else{this.boxy.addClass("fixed")}}if(this.options.center&&Boxy._u(this.options.x,this.options.y)){this.center()}else{this.moveTo(Boxy._u(this.options.x)?this.options.x:Boxy.DEFAULT_X,Boxy._u(this.options.y)?this.options.y:Boxy.DEFAULT_Y)}if(this.options.show)this.show()}jQuery.fn.boxy=function(e){var t;e=e||{};_url=null;return this.each(function(){var t=this.nodeName.toLowerCase(),n=this;if(t=="a"){jQuery(this).click(function(){var t=Boxy.linkedTo(this),n=this.getAttribute("href"),r=jQuery.extend({actuator:this,title:this.title},e);if(t){t.show()}else if(n.indexOf("#")>=0){var i=jQuery(n.substr(n.indexOf("#"))),s=i.clone(true);i.remove();r.unloadOnHide=false;new Boxy(s,r)}else{if(!r.cache)r.unloadOnHide=true;Boxy.load(this.href,r)}return false})}else if(t=="form"){jQuery(this).bind("submit.boxy",function(){Boxy.confirm(e.message||"Please confirm:",function(){jQuery(n).unbind("submit.boxy").submit()});return false})}})};Boxy.EF=function(){};var ico1='<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAAAQAAAAEABcxq3DAAACVUlEQVQ4y32TS0tVURTHf2uffR5qZZ70ilgD7THKsKwgaJgG0RcQuo2LwrHTRn2DBhE4SPIziDSUEotIaiCBQqaYXq/cfNx7PGfv3WAfECrak73W3uv1X/+1hEfzAGdwbjzQ+m4YBt2IKP51nLN5bmqmKGYRmQF2NJCKqOeV7s7qQH+adHQkf/tLeVvL/kGL1fX6na2dxhXn7KTG8aDS01kdujSYFComLwAHKBAFASABKAERqJzsJO06nXz8ulL9ubX7RYdxOJqmlWR7LyYzECjQpTPK62Epi8BhBm1RzNn+3qTe2B9VSunu3LST5SAOjPWG4kCs142DUMA5LzdziKIOojBMlXWiMqMoLFgLXTE8vg5jg4CFwMH9C/BkBNK4DGIht17WOG9oLBhguA/Gh+DIQBhApGHiBigFCxswvwaBBut8q7SnxwdxAu++w5sleDgMk7c9HICpz7Cw7iEE9pggz5f1QcTBbhNeLsLiD+iIoD2E92swswQHmc9c2NIHUM55PKZ8jBXcuwhDvZAb/3e1D8bOQ6RKuM4HwpUVGLxhbuBaH0zcgljDiwVfTaLh6U0Y6QVrwJUNB9AizioszkEBLNdg9hus/4KpT34GcgMDKSzv+szK+rYhoHFFLZQDrEswCBt78Oytn97cQabg1QeIQzg0fsC0A5MdUhRFXeV5Ptc83G71nMrobIM27R0RDyMOoBBPaxxAewSxztiubbbyo6M5DUzXG43LSq1Wz1XSJDmRYEV5+uSYLgEUllazxcpmvVWrN14D0/LnOkf/WWf3j3X+DRcmFXQtWLlUAAAALnpUWHRjcmVhdGUtZGF0ZQAAeNozMjCw0DWw1DUyDTE0sDI1sTKw0DawsDIwAABCRgUcYD4SOgAAAC56VFh0bW9kaWZ5LWRhdGUAAHjaMzIwsNA1sNQ1MgkxNLIyMbQyNtA2sLAyMAAAQgcFFI2R7f4AAAAASUVORK5CYII=" />';var ico2='Close <img src="data:image/p0ng;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90EFg0hMq4W3OIAAAJwSURBVDjLpZM9a1RBFIafOTO792rMKmtkgxoNRgziR2FILQjBQlSwEATTW1qKP0As/Q1RsLVQIQTtBMFOExNj5Vdwl9VscBM3986csdh7F0U7B4aZczgf7zvvHMONF9xcvr1X4ZoTOZ9YOwII/166HULbq84LPLx3/M43c/Ps2box5m5jeHj2cKORpnv2YIz5I6u0VZVep8OHZrPX/PHjfozxllO4fqBWm52cnExFhBACMUaMMYgIiPRPwBnDzvFxhhuN1Lx5M/tlY2PRpc7NjNZq6c/1ddR7jLX9ZOcwxmCsRUQG/qzXo5IkHBodTb9tbs6INWYkhIDPMmKMxBAw1vbvhV3SiDGCKj7LqKYpVefqoiCZKlrs6q5dnLhwgbGpKVQVgLHpaU5cvEgyNDQoWlJ1ZacyeOToUY6dO0fIc8Q5bKXCqcuXERFaq6s0l5YwzhHLAsAALsDXxUVWnz9ncmaGM1evQvGA7xYWaK2soKqYIpZS7xgjWjh+bm6y+PgxrZUVKjt2UEkSmsvLvH/2jGxra0ChbCiqii/4hxix1nJ4epr6+DjqPeo9I0eOMDY1hTgHRWyJeoDAq5KHwL6JCU5fuYJNEl4/esTSkyfYJOHkpUvsm5gg5HkfQaGOExH9/dd1Pn/m06tXdNttlufnsdYS8pza/v101tYoG5bSuhhju9RYgfWNDV7OzQEQYkS85+3Tp9gkQbMMRDAxkm9v41W/Sx7CQjfLeruHhhhOEqrOEYoOVedwzvXnwHvEOSpJgjjHWqfTy7xfcMCDdrd7UmD2YL2e7qzVCn3kr6ECyLa2+Nhq9Vrd7n3ggfnfcf4Fez1j1OYGjdoAAAAASUVORK5CYII=" />';jQuery.extend(Boxy,{WRAPPER:"<table cellspacing='0' cellpadding='0' border='0' class='boxy-wrapper'>"+"<tr><td class='top-left'></td><td class='top'></td><td class='top-right'></td></tr>"+"<tr><td class='leftt'></td><td class='boxy-inner'></td><td class='rightt'></td></tr>"+"<tr><td class='bottom-left'></td><td class='bottom'></td><td class='bottom-right'></td></tr>"+"</table>",DEFAULTS:{title:"&nbsp;",closeable:true,draggable:true,clone:false,actuator:null,center:true,show:true,modal:true,fixed:true,closeText:'<i class="icon-remove icon-2x"></i>',unloadOnHide:true,clickToFront:false,behaviours:Boxy.EF,afterDrop:Boxy.EF,afterShow:Boxy.EF,afterHide:Boxy.EF,beforeUnload:Boxy.EF},DEFAULT_X:50,DEFAULT_Y:50,zIndex:1337,dragConfigured:false,resizeConfigured:false,dragging:null,load:function(e,t){t=t||{};_url=e;var n={url:e,type:"GET",dataType:"html",cache:false,success:function(e){e=jQuery(e);if(t.filter)e=jQuery(t.filter,e);new Boxy(e,t)},error:function(){Boxy.alert('Sorry, we couldn\'t load the resource. Verify you are connected and try again. If the problem persists, contact <a href="/">help</a>')},beforeSend:function(e){}};jQuery.each(["type","cache"],function(){if(this in t){n[this]=t[this];delete t[this]}});jQuery.ajax(n)},reload:function(e){this.load(_url,e)},get:function(e){var t=jQuery(e).parents(".boxy-wrapper");return t.length?jQuery.data(t[0],"boxy"):null},linkedTo:function(e){return jQuery.data(e,"active.boxy")},alert:function(e,t,n){e='<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAP0SURBVFiFvVfNamVFEP6qz7k/CYybkfEnuPIR5q6dwUVEfIUBV26y9xFcidtAEAKiL+Aq4MYBV0I2PoALGWYmgkPQgST3/FS56Kru6nP6GiJiQXPvObe766uvfi+dPMTiQvBEAo6aBhvcIhTc0ncCQDiv22QccU6M47cJ37UXgifvvY/Txx8D9+7ffvi/kNevsHl6htNnvwKtBBw9OgSGX4DfX0x2EhAWAC0AanU1AJQBT4EwAAZkBGTQ1QPcx9+9LN8FHh0C357gqIVg88aDuXJqAFoCYakAFhkANaq88IEqH7NyaQE0gHTxvUn3AnjrQwCCTVujiBZRcVhFEPZsLPwjA2o9dxEANQAHfe7numYAaBEVhxUQ1jtY2AFAOFtPrSp1bDHmIAoA1GTLw9oBWCkwAxEitYULRgXQA9wq/QGQ4BQIwFy6IwOgrMyUJwBrx4K64Z1PS0t4AC6+AWQBUB+tB80BCANyUwEQzM+T1awBUgAexMx1DdDsKwOWKZEYEOsagTDqyykA87EpSjGwdjGxyvtqEvYy9ebzYC5iddMA0FAD0LpA2wEmuWQXgP2YckVscFZKg97tArEE0GYgwYPwcaGuqUmzjilXKB/jXTJExSmVDQDpASswHkTBirGxBmi1g4G16mZncZ+tLgoZYjYlAAhlmaVQYWQZlTd7dQC0isEWxpwNRd1wOgxAIPcAcpsb9+nYMSBVBqbluinv8joygAS/vogUcShdVGXANSsEPbtr6Ueo3vQ/SrBOKYzU1fwSy+FJq62JDFpmbX/lvtS49DGkCcb9KFY07NO1We411yvCfQYh4+QOu9eAqNFtAsDlIXGt1QYLamJtH2vaAcg2guNe5wE7z6UxMAY8AJlYKn1MJRsspMtFhoxeJ3/9rHs6HUA8iAkz1g2FXSVMaM3iFqAuNxaLXNE8//Mn5BBW9sw9fAPwNoOZMVLrBUlxF9NJWlU+6fs0RGbe/GRCvwB/fK93bDMAdmyk71UARrVOMmY1aVezAA1D2Uy88LVjoYt934NJbqk1I+6Rqp5osAnFgAs68dCING7VZLxSJhUAb3Ng2mJ1yQwAxAUa5Q3ku9rgql2NgasyVVMM3OS4kA7wY3phi4x5lEoAtKiQDRPaXKZZ8OwrFENp8vk0KCc5PCNT+uxzSFYcltrdNDB/+2Jyzhetwfm8K2NgKlVvSq/Tq6YcDc76u/wxcSxMLc8ACOeXL7FZHQDb5w7ECMh1tCoNFr7bWacEcs2v/TWrlO3VAXD5EgDhvCXG8Y9nOH38EfDggzpKHxN3Eqm/vrwAnp4BxDimk4dY/PAKXz6/xmevO+z/S1V3kntLXB3s4evD+/j8b5KoiyHTK51PAAAAAElFTkSuQmCCMTE0Mw==" align="left" style="padding-right: 20px;"/><div class="msg_body">'+e+"</div>";return Boxy.ask(e,["Close"],t,n)},info:function(e,t,n){e='<img width="50" src="/img/icons/ok.png" align="left" style="padding-right: 20px;"/><div class="msg_body">'+e+"</div>";return Boxy.ask(e,["OK"],t,n)},confirm:function(e,t,n){e='<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAFMklEQVR42rWXe1BUVRjAv3P3wd2FXRaVZZZHPmCULBLLyYqamESlUYupP0r6o9FxKgMLcfoHNVMwZ8Ry1FQIncYJyonMfBA6qPikmWIQAZGHPCrZXZ4Xdtm9u3vv3dO5vGKXZWHJ/Wb3/rHfud/3+x7nO2cRzEAq8pOlFOYXmlgcqqRlNp4XHvEC6JMyyrCvtpAvi+//sC5RqdJ8HByiTqbVIaoxhSAA09XTZTJZrxkN3YXthsHSDfsqnI8NoLZwzaKQ2SHHZut0r4EUAUJub+KhDwBxiTmA1qa/q38urUv/4lTdnf8NUP/j2vUR86IK5IF0IFBTvyCCYAHAYXJwuXlXt7Z0DBw7fd0waWm82qv5Pvmj6CcXHKXkFIV8KNaQNwLBmXm8I/dCxl/GwSPn/hjwCDGp2frCpNVPxMwtoWiJxBfnLiA8gMU4wH2w6/zrZyvZq9MGuFuQoIqar2tQzgoMn8w59mZgdA1Z5LQClF+6U7OnsH35n+28bVoAjUWJWZExur1I6kFJGs3JDad4yABZg2STk2AHgFVvhPVZN9ZeaXSWTAvAcG7lQ7VOFT0++qGIiWPBAsDbesHaayQgAgSoQ0AZFgWUghijPJeB67XBroOl+Rer8eaWXsBeAW7lPjU//rm5rZQCuWpJxMIgiYZpgZJzjU3Hb8IRvQmqgpUoaOu789NT345dRwV4SJiDBfZBJZy5Zf597wWc+E8/OLwCXMtelLw0LqqUkrk2LSapF2wOuFF2W//+KZzsdEKdhRuOJjNFu3B3elwjpXQ1h+2dIDANYDdycKsGNW8pwkv1ZrB4Bdj51pwlb8TD9QAZpse0eKShHBxkF5vzylvwNsYGY5Mud1OkZNObEVZZsEwuvoJJnZzWdjIMmKGZYDcC3K6H1i2FEN9hAvOUPRAkhzm8ExQT6kkgKArMLAf9438vzoqgVyVozZIAVuoUvXH/qcWGtesBLteg+m2n8fPdlikyMBOpO6zeGBUpnETIMmFECywB6AEouISuHCzHa/rYKXrAV7n3Ff1epNZ+QhqIafddIKafY0jjDgCknUD77rTj7QTA+y6YrlTvV9AKufOoVmvfQJFumeBcnBdi9N0AbQawphyFVzoHocrdzowAKr9UyoOD+N9CwxwrkBwAuZ+MeNi5g6TeQhKe+R06fLMNf+ae/hkD1B8I2B4eac9BAR6cC8PDykH60Eoa8NCv6OKpSryx3wbdnmzNCKD1G2nb7HB+nqea8ybinAyszh7gss+gk2XN+HOT3bPzGQH89KlCk/Qs2ydRk+DHj+qRtNtJ5LWNwKQVoQyjGRcT56w3ez4DnM9QxCQsYZulKjcFAeBI9IOk6985hDIbuvDhAfvokfUYAc5uVj79wgJrrcR9TBEAnsw4xgrOxIMottuCm6djz2eAtESZKlrLF88KxJHuAOJw7usHW04ZJJOO7/ELgCixOrncxoPr2Tey/VhOwBwnWBkWHt+teLz8snO5VBsWukpCywDGDTXRuWAX4G5de8cnebX3pmvPZ4CSPcs0iSsTGERPvH2Iu8BQfc2Wsrsm5n4n7vALwOWcWM3Lr8YzSAETDx4ygPrqq2DFjqbFD3vhgV8ASrNCNC89gxikwq7+xV1ADp3+Ryys2m/zH0BJhlTzYhzPUKqJGeDJEBroAlj9NSx+2OcngPxUiSZlqcAA7XoO4JESWMg1fPURWNzK+AkgdRmiNIH4gE4Nce46EYKzA/62Aj7stECbXwBE0dBAOQTxb6obAPk6yUOCgBu9sE4l/wI551s//xoC8QAAAABJRU5ErkJggg==" align="left" style="padding-right: 20px;padding-bottom:70px"/>'+e;return Boxy.ask(e,["OK","Cancel"],function(e){if(e=="OK")t()},n)},ask:function(e,t,n,r){r=jQuery.extend({modal:true,closeable:false},r||{},{show:true,unloadOnHide:true});var i=jQuery("<div></div>").append(jQuery('<div class="question"></div>').html(e));var s={},o=[];if(t instanceof Array){for(var u=0;u<t.length;u++){s[t[u]]=t[u];o.push(t[u])}}else{for(var a in t){s[t[a]]=a;o.push(t[a])}}var f=jQuery('<form class="answers"></form>');f.html(jQuery.map(o,function(e){return"<input type='button' class='btn' value='"+e+"' />"}).join(" "));jQuery("input[type=button]",f).click(function(){var e=this;Boxy.get(this).hide(function(){if(n)n(s[e.value])})});i.append(f);new Boxy(i,r)},isModalVisible:function(){return jQuery(".boxy-modal-blackout").length>0},_u:function(){for(var e=0;e<arguments.length;e++)if(typeof arguments[e]!="undefined")return false;return true},_handleResize:function(e){var t=jQuery(document);jQuery(".boxy-modal-blackout").css("display","none").css({width:t.width(),height:t.height()}).css("display","block")},_handleDrag:function(e){var t;if(t=Boxy.dragging){t[0].boxy.css({left:e.pageX-t[1],top:e.pageY-t[2]})}},_nextZ:function(){return Boxy.zIndex++},_viewport:function(){var e=document.documentElement,t=document.body,n=window;return jQuery.extend(jQuery.browser.msie?{left:t.scrollLeft||e.scrollLeft,top:t.scrollTop||e.scrollTop}:{left:n.pageXOffset,top:n.pageYOffset},!Boxy._u(n.innerWidth)?{width:n.innerWidth,height:n.innerHeight}:!Boxy._u(e)&&!Boxy._u(e.clientWidth)&&e.clientWidth!=0?{width:e.clientWidth,height:e.clientHeight}:{width:t.clientWidth,height:t.clientHeight})}});Boxy.prototype={estimateSize:function(){this.boxy.css({visibility:"hidden",display:"block"});var e=this.getSize();this.boxy.css("display","none").css("visibility","visible");return e},getSize:function(){return[this.boxy.width(),this.boxy.height()]},getContentSize:function(){var e=this.getContent();return[e.width(),e.height()]},getPosition:function(){var e=this.boxy[0];return[e.offsetLeft,e.offsetTop]},getCenter:function(){var e=this.getPosition();var t=this.getSize();return[Math.floor(e[0]+t[0]/2),Math.floor(e[1]+t[1]/2)]},getInner:function(){return jQuery(".boxy-inner",this.boxy)},getContent:function(){return jQuery(".boxy-content",this.boxy)},setContent:function(e){e=jQuery(e).css({display:"block"}).addClass("boxy-content");if(this.options.clone)e=e.clone(true);this.getContent().remove();this.getInner().append(e);this._setupDefaultBehaviours(e);this.options.behaviours.call(this,e);return this},moveTo:function(e,t){this.moveToX(e).moveToY(t);return this},moveToX:function(e){if(typeof e=="number")this.boxy.css({left:e});else this.centerX();return this},moveToY:function(e){if(typeof e=="number")this.boxy.css({top:e});else this.centerY();return this},centerAt:function(e,t){var n=this[this.visible?"getSize":"estimateSize"]();if(typeof e=="number")this.moveToX(e-n[0]/2);if(typeof t=="number")this.moveToY(t-n[1]/2);return this},centerAtX:function(e){return this.centerAt(e,null)},centerAtY:function(e){return this.centerAt(null,e)},center:function(e){var t=Boxy._viewport();var n=this.options.fixed?[0,0]:[t.left,t.top];if(!e||e=="x")this.centerAt(n[0]+t.width/2,null);if(!e||e=="y")this.centerAt(null,n[1]+t.height/2);return this},centerX:function(){return this.center("x")},centerY:function(){return this.center("y")},resize:function(e,t,n){if(!this.visible)return;var r=this._getBoundsForResize(e,t);this.boxy.css({left:r[0],top:r[1]});this.getContent().css({width:r[2],height:r[3]});if(n)n(this);return this},tween:function(e,t,n){if(!this.visible)return;var r=this._getBoundsForResize(e,t);var i=this;this.boxy.stop().animate({left:r[0],top:r[1]});this.getContent().stop().animate({width:r[2],height:r[3]},function(){if(n)n(i)});return this},isVisible:function(){return this.visible},show:function(){if(this.visible)return;if(this.options.modal){var e=this;if(!Boxy.resizeConfigured){Boxy.resizeConfigured=true;jQuery(window).resize(function(){Boxy._handleResize()})}this.modalBlackout=jQuery('<div class="boxy-modal-blackout"></div>').css({zIndex:Boxy._nextZ(),opacity:.5,width:jQuery.browser.msie?jQuery(document).width()-17:jQuery(document).width(),height:jQuery(document).height()}).appendTo(document.body);this.toTop();if(this.options.closeable){jQuery(document.body).bind("keydown.boxy",function(t){var n=t.which||t.keyCode;if(n==27){e.hide();jQuery(document.body).unbind("keydown.boxy")}})}}if($(".boxy-content select").length>0){$(".boxy-content select").each(function(){$(this).select2({width:"100%",allowClear:true,placeholder:$(this).attr("placeholder")})})}$("#content_loader",parent.document.body).fadeOut("slow");this.boxy.stop().css({opacity:1}).show();this.visible=true;this.moveToY(0);this._fire("afterShow");return this},hide:function(e){if(!this.visible)return;var t=this;if(this.options.modal){jQuery(document.body).unbind("keydown.boxy");this.modalBlackout.animate({opacity:0},function(){jQuery(this).remove()})}this.boxy.stop().animate({opacity:0},300,function(){t.boxy.css({display:"none"});t.visible=false;t._fire("afterHide");if(e)e(t);if(t.options.unloadOnHide)t.unload()});return this},toggle:function(){this[this.visible?"hide":"show"]();return this},hideAndUnload:function(e){this.options.unloadOnHide=true;this.hide(e);return this},unload:function(){this._fire("beforeUnload");$(this.boxy).find("select").each(function(){$(this).select2("destroy")});this.boxy.remove();if(this.options.actuator){jQuery.data(this.options.actuator,"active.boxy",false)}},toTop:function(){this.boxy.css({zIndex:Boxy._nextZ()});return this},getTitle:function(){return jQuery("> .title-bar h2",this.getInner()).html()},setTitle:function(e){jQuery("> .title-bar h2",this.getInner()).html(e);return this},_getBoundsForResize:function(e,t){var n=this.getContentSize();var r=[e-n[0],t-n[1]];var i=this.getPosition();return[Math.max(i[0]-r[0]/2,0),Math.max(i[1]-r[1]/2,0),e,t]},_setupTitleBar:function(){if(this.options.title){var e=this;var t=jQuery("<div class='title-bar'></div>").html("<h2><i class='icon-list-alt' style='font-size: 1.2em'></i> "+this.options.title+"</h2>");if(this.options.closeable){t.append(jQuery("<a href='#' class='close' title='Press ESC to close'></a>").html(this.options.closeText))}if(this.options.draggable){t[0].onselectstart=function(){return false};t[0].unselectable="on";t[0].style.MozUserSelect="none";if(!Boxy.dragConfigured){jQuery(document).mousemove(Boxy._handleDrag);Boxy.dragConfigured=true}t.mousedown(function(t){e.toTop();Boxy.dragging=[e,t.pageX-e.boxy[0].offsetLeft,t.pageY-e.boxy[0].offsetTop];jQuery(this).addClass("dragging")}).mouseup(function(){jQuery(this).removeClass("dragging");Boxy.dragging=null;e._fire("afterDrop")})}this.getInner().prepend(t);this._setupDefaultBehaviours(t)}},_setupDefaultBehaviours:function(e){var t=this;if(this.options.clickToFront){e.click(function(){t.toTop()})}jQuery(".close",e).click(function(){t.hide();return false}).mousedown(function(e){e.stopPropagation()})},_fire:function(e){this.options[e].call(this)}}